{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\admin\\\\3D Objects\\\\ReactJS_Hotel\\\\src\\\\components\\\\body\\\\SignupForm\\\\signin.jsx\";\nimport React, { Component } from 'react';\nimport { Link, Redirect, useHistory } from 'react-router-dom';\nimport \"./style.scoped.css?scopeId=c9059e90\";\nimport axios from 'axios';\nimport url from './../../../config';\nimport { data, event } from 'jquery';\nimport { BrowserRouter as Router, Route, Switch } from 'react-router-dom'; //import { useCookies }    from 'react-cookie'\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass signin extends Component {\n  constructor(props) {\n    super(props);\n\n    this.checkSignIn = event => {\n      event.preventDefault();\n      axios({\n        method: 'GET',\n        url: url + '/checklogin?email=' + this.state.email + '&password=' + this.state.password\n      }).then(res => {\n        // this.setState({\n        //     email: this.state.email,\n        //     passWord: this.state.password\n        //     // let form = new FormData;\n        //     // form.append('email', this.state.email);\n        //     // form.append('password', this.state.passsWord);//ok ro\n        // })\n        console.log(res.data.message);\n\n        if (res.data.message === \"OK\") {\n          localStorage.setItem(\"id_user\", res.data.id_user);\n          this.setState({\n            role: res.data.role,\n            redirect: true\n          });\n          localStorage.setItem(\"login\", \"true\");\n        } else {\n          //console.log(data.data.message);\n          alert(\" Đăng Nhập sai mật khẩu \");\n        }\n      }).catch(err => {\n        console.log(err);\n      });\n    };\n\n    this.myhandleChange = event => {\n      let name = event.target.name;\n      let value = event.target.value;\n      this.setState({\n        [name]: value\n      });\n    };\n\n    this.mySubmitHandler = event => {\n      event.preventDefault();\n    };\n\n    this.state = {\n      email: '',\n      password: '',\n      redirect: false,\n      role: ''\n    };\n    localStorage.removeItem('id_user');\n  } //  setCookie= (values)=> {\n  //     const [cookies, setCookie] = useCookies(['access_token', 'refresh_token'])\n  //     let expires = new Date()\n  //     expires.setTime(expires.getTime() + (30*60* 1000))\n  //     setCookie('access_token', response.data.access_token, { path: '/',  expires})\n  //     setCookie('status', response.data.refresh_token, {path: '/', expires})\n  //     // ...\n  // }\n  //////heckSignIn(){{user_id)\n\n\n  routeControl() {\n    if (this.state.role == \"admin\") {\n      return /*#__PURE__*/_jsxDEV(Redirect, {\n        to: \"/admin\",\n        \"data-v-c9059e90\": \"\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 19\n      }, this);\n    }\n\n    if (this.state.role == \"provider\") {\n      return /*#__PURE__*/_jsxDEV(Redirect, {\n        to: \"/provider\",\n        \"data-v-c9059e90\": \"\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 20\n      }, this);\n    }\n\n    if (this.state.role == \"user\") {\n      return /*#__PURE__*/_jsxDEV(Redirect, {\n        to: \"/home\",\n        \"data-v-c9059e90\": \"\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 20\n      }, this);\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      \"data-v-c9059e90\": \"\",\n      children: [this.state.redirect ? this.routeControl() : null, /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"header\",\n        \"data-v-c9059e90\": \"\",\n        children: /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/home\",\n          \"data-v-c9059e90\": \"\",\n          children: \"Home\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container\",\n        \"data-v-c9059e90\": \"\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"row\",\n          \"data-v-c9059e90\": \"\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-md-4 offset-md-4 form login-form\",\n            \"data-v-c9059e90\": \"\",\n            children: /*#__PURE__*/_jsxDEV(\"form\", {\n              \"data-v-c9059e90\": \"\",\n              children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                className: \"text-center\",\n                \"data-v-c9059e90\": \"\",\n                children: \"Login Form\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 97,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-group\",\n                \"data-v-c9059e90\": \"\",\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  className: \"form-control\",\n                  type: \"email\",\n                  name: \"email\",\n                  onChange: this.myhandleChange,\n                  placeholder: \"Email Address\",\n                  required: true,\n                  \"data-v-c9059e90\": \"\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 99,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 98,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-group\",\n                \"data-v-c9059e90\": \"\",\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  className: \"form-control\",\n                  type: \"password\",\n                  name: \"password\",\n                  onChange: this.myhandleChange,\n                  placeholder: \"Password\",\n                  required: true,\n                  \"data-v-c9059e90\": \"\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 102,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 101,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"link forget-pass text-left\",\n                \"data-v-c9059e90\": \"\",\n                children: /*#__PURE__*/_jsxDEV(\"a\", {\n                  href: \"forgot-password.php\",\n                  \"data-v-c9059e90\": \"\",\n                  children: \"Forgot password?\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 104,\n                  columnNumber: 77\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 104,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-group\",\n                \"data-v-c9059e90\": \"\",\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  className: \"form-control button\",\n                  type: \"button\",\n                  onClick: this.checkSignIn,\n                  name: \"signin\",\n                  defaultValue: \"Signin\",\n                  \"data-v-c9059e90\": \"\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 106,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 105,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"link login-link text-center\",\n                \"data-v-c9059e90\": \"\",\n                children: [\"Not yet a member? \", /*#__PURE__*/_jsxDEV(Link, {\n                  \"data-v-c9059e90\": \"\",\n                  children: \"Signup now\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 108,\n                  columnNumber: 96\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 108,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 96,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 13\n    }, this);\n  }\n\n} //quen sua lon cho roi đo\n// ok tao sai , làm tiếp vạy you sai not me\n\n\nexport default signin;","map":{"version":3,"sources":["C:/Users/admin/3D Objects/ReactJS_Hotel/src/components/body/SignupForm/signin.jsx"],"names":["React","Component","Link","Redirect","useHistory","axios","url","data","event","BrowserRouter","Router","Route","Switch","signin","constructor","props","checkSignIn","preventDefault","method","state","email","password","then","res","console","log","message","localStorage","setItem","id_user","setState","role","redirect","alert","catch","err","myhandleChange","name","target","value","mySubmitHandler","removeItem","routeControl","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { Link, Redirect, useHistory } from 'react-router-dom';\r\nimport './style.scoped.css'\r\nimport axios from 'axios';\r\nimport url from './../../../config'\r\nimport { data, event } from 'jquery';\r\nimport {BrowserRouter as Router,Route,Switch } from 'react-router-dom'\r\n\r\n//import { useCookies }    from 'react-cookie'\r\nclass signin extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            email: '',\r\n            password: '',\r\n            redirect:false,\r\n            role:''\r\n        }\r\n        localStorage.removeItem('id_user');\r\n    }\r\n    //  setCookie= (values)=> {\r\n    //     const [cookies, setCookie] = useCookies(['access_token', 'refresh_token'])\r\n    //     let expires = new Date()\r\n    //     expires.setTime(expires.getTime() + (30*60* 1000))\r\n    //     setCookie('access_token', response.data.access_token, { path: '/',  expires})\r\n    //     setCookie('status', response.data.refresh_token, {path: '/', expires})\r\n    \r\n    //     // ...\r\n    // }\r\n    //////heckSignIn(){{user_id)\r\n    checkSignIn = (event) => {\r\n        event.preventDefault();\r\n        \r\n        axios({\r\n            method: 'GET',\r\n            url: url+'/checklogin?email='+this.state.email+'&password='+this.state.password,\r\n        \r\n        }).then(res => {\r\n            // this.setState({\r\n            //     email: this.state.email,\r\n            //     passWord: this.state.password\r\n            //     // let form = new FormData;\r\n            //     // form.append('email', this.state.email);\r\n            //     // form.append('password', this.state.passsWord);//ok ro\r\n            // })\r\n            console.log(res.data.message)\r\n            if (res.data.message === \"OK\") {\r\n                localStorage.setItem(\"id_user\",res.data.id_user);\r\n              this.setState({role:res.data.role,redirect:true})\r\n              localStorage.setItem(\"login\",\"true\");\r\n\r\n             }\r\n            else {\r\n                //console.log(data.data.message);\r\n                alert(\" Đăng Nhập sai mật khẩu \")\r\n            }\r\n\r\n        }).catch(err => {\r\n            console.log(err);\r\n        });\r\n    }\r\n\r\n\r\n    /////// heckSignIn(){\r\n    myhandleChange = (event) => {\r\n        let name = event.target.name;\r\n        let value = event.target.value;\r\n        this.setState({[name]: value });\r\n    }\r\n    mySubmitHandler = (event) => {\r\n        event.preventDefault();\r\n    }\r\n    routeControl(){\r\n        if(this.state.role==\"admin\"){\r\n           return <Redirect to='/admin'/>\r\n        }\r\n        if(this.state.role==\"provider\"){\r\n            return <Redirect to='/provider'/>\r\n        }if(this.state.role==\"user\"){\r\n            return <Redirect to='/home'/>\r\n        }\r\n    }\r\n    \r\n    render() {\r\n          \r\n        return (\r\n\r\n            <div>\r\n                {this.state.redirect?this.routeControl():null}\r\n                <button className=\"header\">\r\n                    <Link to='/home' >Home</Link>\r\n                </button>\r\n                <div className=\"container\">\r\n                    <div className=\"row\">\r\n                        <div className=\"col-md-4 offset-md-4 form login-form\">\r\n                            <form>\r\n                                <h2 className=\"text-center\">Login Form</h2>\r\n                                <div className=\"form-group\">\r\n                                    <input className=\"form-control\" type=\"email\" name=\"email\" onChange={this.myhandleChange} placeholder=\"Email Address\" required />\r\n                                </div>\r\n                                <div className=\"form-group\">\r\n                                    <input className=\"form-control\" type=\"password\" name=\"password\" onChange={this.myhandleChange} placeholder=\"Password\" required />\r\n                                </div>\r\n                                <div className=\"link forget-pass text-left\"><a href=\"forgot-password.php\">Forgot password?</a></div>\r\n                                <div className=\"form-group\">\r\n                                    <input className=\"form-control button\" type=\"button\" onClick={this.checkSignIn} name=\"signin\" defaultValue=\"Signin\" />\r\n                                </div>\r\n                                <div className=\"link login-link text-center\">Not yet a member? <Link>Signup now</Link></div> \r\n                            </form>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n            </div>\r\n\r\n        );\r\n    }\r\n}//quen sua lon cho roi đo\r\n// ok tao sai , làm tiếp vạy you sai not me\r\nexport default signin;"]},"metadata":{},"sourceType":"module"}